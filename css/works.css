/* =============================================================================
   Works 區樣式統整（Kiki Design Style）
   結構分群、同類統整、重複屬性合併
============================================================================= */

/* === 外殼區 (Section Wrapper) === */
#works {
  padding-top: var(--section-padding-y, 6rem);
  padding-bottom: var(--section-padding-y, 6rem);
  background: var(--section-bg-works, transparent);
}

/* === 區塊：標題群組 統整 === */
.works-section-header {
  display: flex;
  flex-direction: column;
  border-left: 1px solid var(--work-title-border, rgba(239, 68, 68, 0.20));
  padding-left: 1.5rem;
  margin-bottom: 6rem;
  align-items: center;
  text-align: center;
}
@media (min-width: 768px) {
  .works-section-header {
    padding-left: 2.5rem;
    margin-bottom: 12rem;
    align-items: flex-start;
    text-align: left;
  }
}
/* 標題主/副 聚合屬性 */
.works-section-title, .works-section-label {
  margin: 0;
}
.works-section-title {
  font-size: 2.4rem;
  font-style: italic;
  font-family: 'Noto Serif TC', serif;
  font-variation-settings: 'ital' 1;
  letter-spacing: 0.2em;
}
.works-section-label {
  text-transform: uppercase;
  font-size: var(--work-title-label-size, 9px);
  letter-spacing: var(--work-title-label-spacing, 0.5em);
  color: var(--brand-subtle, rgba(234,226,214,0.5));
}

/* === 作品格線/卡片區 grid === */
.works-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--work-grid-gap-mobile, 5rem);
  align-items: start;
}
@media (min-width: 768px) {
  .works-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* === 卡片本體 & 光暈聚合 === */
.work-card-inner {
  position: relative;
  overflow: hidden;
  aspect-ratio: 4/5;
  border-radius: 2.2rem;
  border: 1.5px solid var(--work-card-border, rgba(255,255,255,0.10));
  padding: var(--work-card-padding, 3.5rem);
  box-shadow: 0 0 0 rgba(0, 0, 0, 0);
  transition: box-shadow 0.5s ease, transform 0.5s ease, border-color 0.4s, background-color 0.4s;
  will-change: transform, box-shadow;
  --mouse-x: 50%;
  --mouse-y: 50%;
}

/* 
  視覺動態註解：
  此 ::before 發光層提供卡片 hover 時的環狀光影。
  這次擴散半徑縮小（250px），透明區域收窄到 60%，讓光暈層更「內斂」；混合模式改為 soft-light 融合質感，
  hover 時基礎透明度僅提升到 0.5，讓發光更柔和、輕盈。
*/
.work-card-inner::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  /* 關鍵修正：將發光層層級提高，確保浮在主圖（z-index: 20）上，但仍在 Link 元件下 */
  z-index: 30;
  opacity: 0;
  /* 光暈柔化：radial-gradient 改為 250px，過渡透明縮到 60%（不再有硬邊）；顏色融合具質感 */
  background: radial-gradient(
    250px circle at var(--mouse-x) var(--mouse-y),
    var(--card-glow-color),
    transparent 60%
  );
  mix-blend-mode: soft-light; /* 質感光暈，不會過亮 */
  transition: opacity 0.6s ease;
}
/* hover 狀態時，讓光暈滑順顯示，最高透明度僅設 0.5（避免過於搶眼） */
.work-card:hover .work-card-inner {
  box-shadow: 0 0 20px var(--card-glow-color), 0 0 50px rgba(0,0,0,0.5);
}
.work-card:hover .work-card-inner::before {
  opacity: 0.5;
}
@media (hover: none) and (pointer: coarse) {
  .work-card:hover .work-card-inner::before {
    opacity: 0;
  }
}

/* === 卡片主圖/罩層統整 === */
.work-card-overlay {
  position: absolute;
  inset: 0;
  z-index: 10;
  background: var(--work-card-overlay, rgba(0,0,0,0.20));
  transition: background 0.5s;
}
.work-card:hover .work-card-overlay {
  background: rgba(0,0,0,0.1);
}
.work-card-image-wrapper {
  overflow: hidden;
  position: relative;
  width: 100%;
  height: 100%;
}
.work-card-image,
.work-card-image-parallax {
  width: 100%;
  height: 100%;
  object-fit: contain;
}
.work-card-image {
  object-position: center;
  opacity: 0.9;
  transition: transform 1.2s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.7s;
}
.work-card-image-parallax {
  max-width: 420px;
  max-height: 520px;
  --parallax-offset-x: 0px;
  transform: translateX(var(--parallax-offset-x, 0px)) scale(1.02);
  transition: transform 0.4s ease-out;
  margin-left: auto;
  margin-right: auto;
  display: block;
}
.work-card:hover .work-card-image-parallax {
  transform: translateX(var(--parallax-offset-x, 0px)) scale(1.1);
  opacity: 1;
}
@media (hover: none) and (pointer: coarse) {
  .work-card-image-parallax {
    transform: scale(1.05);
  }
  .work-card:hover .work-card-image-parallax {
    transform: scale(1.1);
  }
}

/* === 卡片懸浮箭頭/圓形聚合 === */
.work-card-arrow {
  position: absolute;
  top: 1rem;
  right: 1rem;
  z-index: 20;
  opacity: 0;
  transition: opacity 0.5s;
}
.work-card:hover .work-card-arrow {
  opacity: 1;
}
.arrow-circle {
  width: 2rem;
  height: 2rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(4px);
  border: 1px solid var(--work-card-arrow-border, rgba(255,255,255,0.3));
  background: var(--work-card-arrow-bg, rgba(0,0,0,0.3));
  color: var(--work-card-arrow-color, #fff);
  font-size: 10px;
}

/* === 卡片底部資訊區（標題、副標統整）=== */
.work-card-info {
  margin-top: 2rem;
}
@media (min-width: 768px) {
  .work-card-info {
    margin-top: 3rem;
  }
}
.work-card-info h3 {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.work-card-title,
.work-card-subtitle {
  text-transform: uppercase;
}
.work-card-title {
  font-weight: 300;
  font-size: var(--work-card-title-size, 12px);
  letter-spacing: var(--work-card-title-spacing, 0.4em);
  color: var(--work-card-title-color, rgba(255,255,255,0.7));
  transition: color 0.3s;
}
.work-card:hover .work-card-title {
  color: #fff;
}
.work-card-subtitle {
  font-style: italic;
  font-size: var(--work-card-subtitle-size, 9px);
  letter-spacing: var(--work-card-subtitle-spacing, 0.25em);
  color: var(--brand-subtle, rgba(234,226,214,0.5));
}

/* === 手機專用：調整卡片 padding/圓角/比例 & 圖片最大化 === */
@media (max-width: 767px) {
  .work-card-inner {
    padding: 1rem !important;
    aspect-ratio: 1.1 / 1;
    border-radius: 1.5rem;
  }
  /* 記得發光層圓角跟著主結構圓角調整，才不會漏出方角 */
  .work-card-inner::before {
    border-radius: 1.5rem;
  }
  .work-card-image {
    max-width: 90%;
    max-height: 90%;
  }
}