/* =============================================================================
   Works 區樣式統整（Kiki Design Style）
   ─ 嚴格遵循比例保護、變數管理，結構與功能明確分群，重複屬性整併
============================================================================= */

/* ---【外殼區】Portfolio 主體分層與背景——分明分界，保障視覺呼吸 --- */
/*
  #works：負責整個 Portfolio 區的上下間距與背景填色，各獨立分層。
  ─「視覺體驗」：畫面分明分野，滑動時每個版塊不會混雜。
*/
#works {
  padding-top: var(--section-padding-y, 6rem);
  padding-bottom: var(--section-padding-y, 6rem);
  background: var(--section-bg-works, transparent);
}

/* ---【區塊：標題群組】一致性聚合，排版響應式調整 --- */
/*
  .works-section-header：負責標題（主/副）群的布局及左右齊；
  ─「視覺體驗」：小螢幕置中，大螢幕齊主要內容左，提升品牌一體感。
*/
.works-section-header {
  display: flex;
  flex-direction: column;
  border-left: 1px solid var(--work-title-border, rgba(239, 68, 68, 0.20));
  padding-left: 1.5rem;
  margin-bottom: 6rem;
  align-items: center;
  text-align: center;
}
@media (min-width: 768px) {
  .works-section-header {
    padding-left: 2.5rem;
    margin-bottom: 12rem;
    align-items: flex-start;
    text-align: left;
  }
}

/*
  .works-section-title, .works-section-label：
    聚合同類排版屬性，利於維護主題色與字距動態。
  ─「視覺體驗」：主標題提供聚焦感，副標題與主色互補。
*/
.works-section-title, .works-section-label {
  margin: 0;
}
.works-section-title {
  font-size: 2.4rem;
  font-style: italic;
  font-family: 'Noto Serif TC', serif;
  font-variation-settings: 'ital' 1;
  letter-spacing: 0.2em;
}
.works-section-label {
  text-transform: uppercase;
  font-size: var(--work-title-label-size, 9px);
  letter-spacing: var(--work-title-label-spacing, 0.5em);
  color: var(--brand-subtle, rgba(234,226,214,0.5));
}

/* ---【作品格線／卡片區】統一規格，響應式、動態與效能歸檔 --- */
/*
  .works-grid：統一間距與欄數，確保動態流暢切換排列；
  ─「視覺體驗」：小螢幕一欄、大螢幕二欄，間距變數集管。
*/
.works-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--work-grid-gap-mobile, 5rem);
  align-items: start;
}
@media (min-width: 768px) {
  .works-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/*
  .work-card-inner：卡片格式一致、陰影效果及動態 GPU 優化歸檔
  .work-card:hover .work-card-inner：hover 陰影光暈
  ─「視覺體驗」：統一卡片比例與漸層，滑鼠移入將產生發光立體感
*/
.work-card-inner {
  position: relative;
  overflow: hidden;
  aspect-ratio: 4/5;
  border-radius: 2.2rem;
  border: 1.5px solid var(--work-card-border, rgba(255,255,255,0.10));
  padding: var(--work-card-padding, 3.5rem); /* 調整後: 由 2rem 改為 3.5rem，讓圖片更內縮 */
  box-shadow: 0 0 0 rgba(0, 0, 0, 0);
  transition: box-shadow 0.5s ease, transform 0.5s ease, border-color 0.4s, background-color 0.4s;
  will-change: transform, box-shadow;
  /* [滑鼠追蹤光暈] CSS 變數預設值（中心位置） */
  --mouse-x: 50%;
  --mouse-y: 50%;
}
/* [滑鼠追蹤光暈] 使用偽元素創建跟隨滑鼠的光暈效果 */
.work-card-inner::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  opacity: 0;
  /* [平滑過渡] 光暈位置和透明度都有過渡效果 */
  transition: opacity 0.3s ease, background 0.1s ease;
  border-radius: 2.2rem;
  /* [滑鼠追蹤光暈] radial-gradient 中心跟隨滑鼠位置 */
  /* 光暈大小 300px，從中心向外漸變到透明 */
  background: radial-gradient(
    circle 300px at var(--mouse-x) var(--mouse-y),
    var(--card-glow-color) 0%,
    transparent 60%
  );
  z-index: 1;
  /* [混合模式] 使用 overlay 讓光暈與背景融合 */
  mix-blend-mode: overlay;
}
.work-card:hover .work-card-inner {
  /* [桌面版] 保留原本的 box-shadow 作為基礎光暈 */
  box-shadow: 0 0 20px var(--card-glow-color), 0 0 50px rgba(0,0,0,0.5);
}
.work-card:hover .work-card-inner::before {
  /* [桌面版] 顯示跟隨滑鼠的光暈偽元素 */
  opacity: 0.7;
}
/* [手機版] 觸控設備維持原本的全發光狀態，不使用滑鼠追蹤 */
@media (hover: none) and (pointer: coarse) {
  .work-card:hover .work-card-inner::before {
    /* 手機版隱藏滑鼠追蹤光暈，只保留 box-shadow */
    opacity: 0;
  }
}

/* ---【卡片主圖/罩層/滑入放大光暈】類型統整 --- */
/*
  .work-card-overlay：主要作為主圖的遮罩保護，hover 時進行漸淡
  .work-card-image：所有主圖統整比例與放大互動
  ─「視覺體驗」：確保圖片絕不變形、遮色層緩和過場
*/
.work-card-overlay {
  position: absolute;
  inset: 0;
  z-index: 10;
  background: var(--work-card-overlay, rgba(0,0,0,0.20));
  transition: background 0.5s;
}
.work-card:hover .work-card-overlay {
  background: rgba(0,0,0,0.1);
}

/* === 理想圖片視差解法：包一層 image-wrapper，確保 overflow:hidden === */
.work-card-image-wrapper {
  overflow: hidden; /* 確保圖片動的時候不會超出卡片 */
  position: relative;
  width: 100%;
  height: 100%;
}
/* 一般圖片，預設採 contain，不會變形 */
.work-card-image {
  width: 100%;
  height: 100%;
  object-fit: contain;
  object-position: center;
  opacity: 0.9;
  transition: transform 1.2s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.7s;
}
/* [視差效果] 圖片根據滑鼠位置微移，增加深度感 */
.work-card-image-parallax {
  width: 100%;
  height: 100%;
  max-width: 420px; /* 限制最大寬度，避免圖片過大 */
  max-height: 520px; /* 選擇性：也可限制最大高度 */
  object-fit: contain; /* 改為 contain，完整顯示圖片且不裁切 */
  --parallax-offset-x: 0px;
  transform: translateX(var(--parallax-offset-x, 0px)) scale(1.02);
  transition: transform 0.4s ease-out;
  margin-left: auto;
  margin-right: auto;
  display: block;
}
.work-card:hover .work-card-image-parallax {
  /* Hover 時稍微再放大，強化深度效果 */
  transform: translateX(var(--parallax-offset-x, 0px)) scale(1.1);
  opacity: 1;
}
/* [手機版] 觸控設備不使用視差效果，僅縮放 */
@media (hover: none) and (pointer: coarse) {
  .work-card-image-parallax {
    transform: scale(1.05);
  }
  .work-card:hover .work-card-image-parallax {
    transform: scale(1.1);
  }
}

/* ---【卡片懸浮箭頭】歸一互動 --- */
/*
  .work-card-arrow：定位與初始透明，hover 出現
  .arrow-circle：圓形本體與聚合排版
  ─「視覺體驗」：輕盈的浮現指示，增強互動引導
*/
.work-card-arrow {
  position: absolute;
  top: 1rem;
  right: 1rem;
  z-index: 20;
  opacity: 0;
  transition: opacity 0.5s;
}
.work-card:hover .work-card-arrow {
  opacity: 1;
}
.arrow-circle {
  width: 2rem;
  height: 2rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(4px);
  border: 1px solid var(--work-card-arrow-border, rgba(255,255,255,0.3));
  background: var(--work-card-arrow-bg, rgba(0,0,0,0.3));
  color: var(--work-card-arrow-color, #fff);
  font-size: 10px;
}

/* ---【卡片底部資訊區（標題、副標、間距、字體優化）】 --- */
/*
  .work-card-info：上邊距響應式歸一
  .work-card-info h3：字體平滑優化
  .work-card-title, .work-card-subtitle：上下標聚合，hover 特效收斂
  ─「視覺體驗」：內容排版呼吸、階層清楚、hover 漸變不突兀
*/
.work-card-info {
  margin-top: 2rem;
}
@media (min-width: 768px) {
  .work-card-info {
    margin-top: 3rem;
  }
}
.work-card-info h3 {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.work-card-title,
.work-card-subtitle {
  text-transform: uppercase;
}
.work-card-title {
  font-weight: 300;
  font-size: var(--work-card-title-size, 12px);
  letter-spacing: var(--work-card-title-spacing, 0.4em);
  color: var(--work-card-title-color, rgba(255,255,255,0.7));
  transition: color 0.3s;
}
.work-card:hover .work-card-title {
  color: #fff;
}
.work-card-subtitle {
  font-style: italic;
  font-size: var(--work-card-subtitle-size, 9px);
  letter-spacing: var(--work-card-subtitle-spacing, 0.25em);
  color: var(--brand-subtle, rgba(234,226,214,0.5));
}